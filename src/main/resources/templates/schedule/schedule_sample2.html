<html lang="ko"><head>
    <meta charset="utf-8"/>
    <title>Scheduler</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <meta content="" name="description"/>
    <meta content="" name="author"/>

    <link rel="stylesheet" href="/webjars/bootstrap/3.3.7/css/bootstrap.css" type="text/css" />
    <style>
        body {
            padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
        }
    </style>
    <link rel="stylesheet" href="/bootstrap-calendar-ahmontero/src/css/bootstrap.calendar.css" type="text/css" />


    <!-- jQuery and the Calendar plugin files -->
    <script type="text/javascript" src="/webjars/jquery/1.11.1/jquery.js" ></script>
    <script type="text/javascript" src="/webjars/bootstrap/3.3.7/js/bootstrap.js" ></script>
    <script type="text/javascript" src="/bootstrap-calendar-ahmontero/src/bootstrap.calendar.js" ></script>

    <script type="text/javascript" th:inline="javascript">
        $(document).ready(function(){
            /*<![CDATA[*/
            var eventList = /*[[${eventList}]]*/;
            var evnts = function(){
                return (eventList === null) ? {"event" : [{"date" : "05/05/2017", "title" : "1"}]} : {"event" : eventList}
            };
            /*]]>*/
            $('#calendar').Calendar({ 'events': evnts, 'weekStart': 1 })
                .on('changeDay', function(event){ alert(event.day.valueOf() +'-'+ event.month.valueOf() +'-'+ event.year.valueOf() ); })
                .on('onEvent', function(event){ alert(event.day.valueOf() +'-'+ event.month.valueOf() +'-'+ event.year.valueOf() ); })
                .on('onNext', function(event){ alert("Next"); })
                .on('onPrev', function(event){ alert("Prev"); })
                .on('onCurrent', function(event){ alert("Current"); });
        });

    </script>
</head>

<body data-offset="50" data-target=".subnav" data-spy="scroll" data-twttr-rendered="true">

<div th:if="${user}">
    <span th:text="${user.userId}"></span><span>님, 안녕하세요!</span><br/>
    <a href="/user/logout">로그아웃</a>
</div>


<div th:if="${#lists.isEmpty(user.schedules)}">
    <p>스케줄이 없습니다</p>
</div>


<div class="container">
    <div class="row">
        <div class="span4 col-md-5" id="calendar" ></div>
        <div class="col-md-6" id="schedule">
            <div class="page-header">
                <h1>5월 x일 일정 <small>Schedule</small></h1>
            </div>
            <div th:unless="${#lists.isEmpty(user.schedules)}">
                <div th:each="schedule : ${user.schedules}">
                    <div class="panel panel-default">
                        <div class="panel-heading" >시간 : <span th:text="${schedule.time}">time</span></div>
                        <div class="panel-body" th:text="${schedule.content}">name</div>
                    </div>
                </div>
            </div>

            <div class="button-list text-right">
                <button type="button" class="btn btn-default" data-toggle="modal" data-target="#createModal">일정 추가하기</button>
            </div>
            <div class="page text-center">
                <ul class ="pagination">
                    <li class="active"><a href="#">1</a></li>
                    <li><a href="#">2</a></li>
                    <li><a href="#">3</a></li>
                </ul>
            </div>
        </div>
    </div>
</div> <!-- /container -->

<!-- Modal -->
<div class="modal fade" id="createModal" role="dialog">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">일정 추가하기</h4>
            </div>
            <div class="modal-body">
                <div class="form-group form-group-lg">
                    <input class="form-control" type="text" placeholder="일정 제목" id="subject"/>
                </div>
                <div class="form-group form-group-lg">
                    <textarea class="form-control" rows="10" type="text" placeholder="내용" id="content"/>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" >등록</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">취소</button>
            </div>
        </div>
    </div>
</div>

</body>
</html>
